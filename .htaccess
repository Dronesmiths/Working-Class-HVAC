# Working Class HVAC - SEO Redirects & Performance
RewriteEngine On
RewriteBase /

# 1. Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://workingclasshvac.com/$1 [L,R=301]

# 2. Force Trailing Slash (except for files)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ https://workingclasshvac.com/$1/ [L,R=301]

# 3. Redirect date-based blog posts to new flat structure
# Example: /2023/12/26/slug/ -> /blog/slug/
RewriteRule ^[0-9]{4}/[0-9]{2}/[0-9]{2}/([^/]+)/?$ blog/$1/ [L,R=301]

# 4. Specific Page Redirects
RewriteRule ^contact-us/?$ contact/ [L,R=301]
RewriteRule ^about-us/?$ about/ [L,R=301]
RewriteRule ^home/?$ / [L,R=301]
RewriteRule ^pricing/?$ / [L,R=301]
RewriteRule ^duct-cleaning/?$ services/ductwork/ [L,R=301]

# 5. Redirect old service paths
RewriteRule ^emergency-hvac-repair-services/?$ services/emergency-service/ [L,R=301]
RewriteRule ^hvac-maintenance-services/?$ services/maintenance/ [L,R=301]
RewriteRule ^heat-pump-installation/?$ services/heating-cooling/ [L,R=301]
RewriteRule ^services/hvac-installation/?$ services/ac-repair/ [L,R=301]
RewriteRule ^services/single-service/?$ services/ [L,R=301]
RewriteRule ^services-v1/mosquitos/?$ services/ [L,R=301]

# 6. Cleanup old lead-gen pages
RewriteRule ^f1-financing-1/?$ contact/ [L,R=301]
RewriteRule ^benji-renovate-america/?$ contact/ [L,R=301]
RewriteRule ^hero-renovate-america-1/?$ contact/ [L,R=301]

# 7. Blog and Feed Cleanups
RewriteRule ^blog/hvac-financing-and-payment-plans/?$ blog/ [L,R=301]
RewriteRule ^category/.*$ blog/ [L,R=301]
RewriteRule ^comments/.*$ blog/ [L,R=301]

# 8. Redirect ALL old/out-of-area locations to homepage
RewriteCond %{REQUEST_URI} ^/locations/
RewriteCond %{REQUEST_URI} !^/locations/(lancaster|palmdale|quartz-hill|rosamond|lake-los-angeles|littlerock)
RewriteRule ^locations/.*$ https://workingclasshvac.com/ [L,R=301]

# 9. Specific location legacy redirects
RewriteRule ^locations/(glendale|woodland-hills|san-bernardino|rancho-cucamonga|valencia|porter-ranch|reseda|chatsworth|encino|san-dimas|chino|calabasas|tarzana|van-nuys|ontario|santa-clarita|monrovia|sherman-oaks|pomona|claremont|covina|chino-hills|upland|pasadena|granada-hills|fontana|burbank|rialto|arcadia|leona-valley|northridge|riverside)/?$ https://workingclasshvac.com/ [L,R=301]

# 10. Browser Caching
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresDefault "access plus 2 days"
</IfModule>
