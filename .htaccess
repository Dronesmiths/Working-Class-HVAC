# Working Class HVAC - SEO Redirects & Performance
RewriteEngine On
RewriteBase /

# 1. Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://workingclasshvac.com/$1 [L,R=301]

# 2. Redirect date-based blog posts to new flat structure
# Example: /2023/12/26/slug/ -> /blog/slug/
RewriteRule ^[0-9]{4}/[0-9]{2}/[0-9]{2}/([^/]+)/?$ blog/$1/ [L,R=301]

# 3. Redirect old service paths
RewriteRule ^emergency-hvac-repair-services/?$ services/emergency-service/ [L,R=301]
RewriteRule ^hvac-maintenance-services/?$ services/maintenance/ [L,R=301]
RewriteRule ^heat-pump-installation/?$ services/heating-cooling/ [L,R=301]
RewriteRule ^services-v1/mosquitos/?$ services/ [L,R=301]

# 4. Cleanup old lead-gen pages
RewriteRule ^f1-financing-1/?$ contact/ [L,R=301]
RewriteRule ^benji-renovate-america/?$ contact/ [L,R=301]
RewriteRule ^hero-renovate-america-1/?$ contact/ [L,R=301]

# 5. Redirect ALL old/out-of-area locations to homepage
# This catch-all fixes the 404s for any location not in our current list
# Lancaster, Palmdale, Quartz Hill, Rosamond, Lake Los Angeles, Littlerock
RewriteCond %{REQUEST_URI} ^/locations/
RewriteCond %{REQUEST_URI} !^/locations/(lancaster|palmdale|quartz-hill|rosamond|lake-los-angeles|littlerock)
RewriteRule ^locations/.*$ https://workingclasshvac.com/ [L,R=301]

# 6. Specific location legacy redirects
RewriteRule ^locations/(glendale|woodland-hills|san-bernardino|rancho-cucamonga|valencia|porter-ranch|reseda|chatsworth|encino|san-dimas|chino|calabasas|tarzana|van-nuys|ontario|santa-clarita|monrovia|sherman-oaks|pomona|claremont|covina|chino-hills|upland|pasadena|granada-hills|fontana|burbank|rialto|arcadia)/?$ https://workingclasshvac.com/ [L,R=301]

# 7. Browser Caching
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/webp "access plus 1 year"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresDefault "access plus 2 days"
</IfModule>
